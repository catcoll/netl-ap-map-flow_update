#!/bin/bash
set -e
REPO_TOP="$(git rev-parse --show-toplevel)"
#
# Building the flow model from source with coverage flags
cd "$REPO_TOP/source"
cp *.F ../test/fortran
cp makefile ../test/fortran
#
# creating directory and building model with coverage
cd ../test/fortran
cp ./source/* .
make test
#
# executing test scripts
set +e
./integration/test_model_code_coverage
./TEST_STRING_MOD.EXE
#
make coverage
