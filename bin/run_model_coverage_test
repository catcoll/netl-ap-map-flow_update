#!/bin/bash
set -e
REPO_TOP="$(git rev-parse --show-toplevel)"
#
# Building the flow model from source with coverage flags
cd "$REPO_TOP/source"
cp *.F ../test/fortran
cp makefile ../test/fortran
#
# creating directory and building model with coverage
cd ../test/fortran
set +e
mkdir gcov_reports
mkdir inp_files
set -e
make test
#
# executing test script
./integration/test_model_code_coverage
