#
# defining variables
COMPILER = gfortran
OPTIMIZE = -O2
MODELNAME = APM-MODEL.EXE
EXPORTNAME = OPENFOAM-EXPORT.EXE
MODELFILES = APM_MODULE.F UNIT_CONVERSION_MODULE.F APERTURE_MAP_FLOW.F APM_SUBROUTINES.F APM_SOLVER.F APM_FLOW.F APM_OUTPUT.F
EXPORTFILES = APM_MODULE.F UNIT_CONVERSION_MODULE.F OPENFOAM_EXPORT.F OPENFOAM_EXPORT_SUBROUTINES.F APM_SUBROUTINES.F APM_SOLVER.F
WFLAGS = -Wall -Wline-truncation -Wcharacter-truncation -Wsurprising -Waliasing -Wunused-parameter 
FFLAGS = -fimplicit-none -fwhole-file -fcheck=all -std=f2008 -pedantic -fbacktrace
#
# This will compile the entire program and it's modules
all:
	$(COMPILER) -c APM_MODULE.F
	$(COMPILER) -c UNIT_CONVERSION_MODULE.F
	$(COMPILER) -o $(MODELNAME) $(MODELFILES) $(OPTIMIZE) $(FFLAGS) $(WFLAGS) 
	$(COMPILER) -o $(EXPORTNAME) $(EXPORTFILES) $(OPTIMIZE) $(FFLAGS) $(WFLAGS) 
	mv $(MODELNAME) ..
	mv $(EXPORTNAME) ..